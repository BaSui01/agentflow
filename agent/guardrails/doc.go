// 版权所有 2024 AgentFlow Authors. 版权所有。
// 此源代码的使用由 MIT 许可规范,该许可可以是
// 在LICENSE文件中找到。

/*
包 guardrails 为智能体提供输入与输出安全防护能力。

# 概述

guardrails 聚焦于“在不破坏业务流程的前提下，降低内容风险”。
它支持在 Agent 执行前后进行统一校验，用于识别并处理：

- 提示词注入与越权指令
- PII（个人敏感信息）泄露
- 不安全或违规输出
- 自定义业务规则违规内容

# 核心模型

本包围绕 `Validator` 与 `ValidatorChain` 展开：

- `Validator`：单项规则校验器，负责特定类型风险检测
- `ValidatorChain`：多校验器编排器，统一执行顺序与结果汇总

链路执行支持两种模式：

- `ChainModeFailFast`：遇到首个错误立即返回，延迟更低
- `ChainModeCollectAll`：执行全部校验并汇总错误，诊断更全面

# 内置能力

- 长度校验：防止超长输入导致资源消耗异常
- PII 检测：识别邮箱、手机号、证件号等敏感信息
- 注入检测：识别常见 Prompt Injection 模式
- 输出校验：对模型输出执行安全与合规检查

# 结果与错误

校验结果包含有效性、错误列表、警告列表与附加元数据。
错误采用结构化错误码，便于上层执行统一处理策略（拦截、脱敏、审计、降级）。

# 扩展方式

你可以通过实现 `Validator` 接口接入自定义规则，例如：

- 行业术语合规校验
- 组织内部敏感词校验
- 多租户隔离策略校验

# 与 agent 包集成

guardrails 可接入 Agent 的输入和输出环节，实现全链路防护：

- 输入侧：在规划或执行前拦截高风险内容
- 输出侧：在返回用户前进行安全校验和必要处理

这使得智能体在保持可用性的同时具备更稳定的安全边界。
*/
package guardrails
