# Multimodal Processing

AgentFlow provides complete multimodal content handling for images, audio, and video input/output.

## Content Types

```go
import "github.com/BaSui01/agentflow/llm/multimodal"

const (
    ContentTypeText     = "text"
    ContentTypeImage    = "image"
    ContentTypeAudio    = "audio"
    ContentTypeVideo    = "video"
    ContentTypeDocument = "document"
)
```

## Image Processing

### Image Input

```go
// From URL
imageContent := multimodal.NewImageURLContent("https://example.com/image.png")

// From Base64
imageContent := multimodal.NewImageBase64Content(base64Data, multimodal.ImageFormatPNG)

// From file
imageContent, err := multimodal.LoadImageFromFile("./image.png")
```

### Image Generation

```go
import "github.com/BaSui01/agentflow/llm/image"

provider := image.NewOpenAIImageProvider(config)

resp, err := provider.Generate(ctx, &image.GenerateRequest{
    Prompt:  "A cute cat sleeping in sunlight",
    Model:   "dall-e-3",
    Size:    "1024x1024",
    Quality: "hd",
})

for _, img := range resp.Images {
    fmt.Printf("URL: %s\n", img.URL)
}

// Image editing
editResp, err := provider.Edit(ctx, &image.EditRequest{
    Image:  imageReader,
    Mask:   maskReader,
    Prompt: "Change background to beach",
})
```

## Audio Processing

### Text-to-Speech (TTS)

```go
import "github.com/BaSui01/agentflow/llm/speech"

ttsProvider := speech.NewOpenAITTSProvider(config)

resp, err := ttsProvider.Synthesize(ctx, &speech.TTSRequest{
    Text:   "Hello, welcome to AgentFlow!",
    Model:  "tts-1-hd",
    Voice:  "alloy",
    Speed:  1.0,
})

// Save to file
ttsProvider.SynthesizeToFile(ctx, req, "output.mp3")
```

### Speech-to-Text (STT)

```go
sttProvider := speech.NewOpenAISTTProvider(config)

resp, err := sttProvider.Transcribe(ctx, &speech.STTRequest{
    Audio:          audioReader,
    Model:          "whisper-1",
    Language:       "en",
    ResponseFormat: "verbose_json",
})

fmt.Printf("Text: %s\n", resp.Text)

for _, seg := range resp.Segments {
    fmt.Printf("[%v - %v] %s\n", seg.Start, seg.End, seg.Text)
}
```

## Video Processing

### Video Analysis

```go
import "github.com/BaSui01/agentflow/llm/video"

geminiVideo := video.NewGeminiVideoProvider(config)

resp, err := geminiVideo.Analyze(ctx, &video.AnalyzeRequest{
    VideoURL:  "https://example.com/video.mp4",
    Prompt:    "Describe the video content",
    MaxFrames: 10,
    Interval:  2.0,
})

fmt.Printf("Description: %s\n", resp.Content)
```

### Video Generation

```go
runwayProvider := video.NewRunwayProvider(config)

resp, err := runwayProvider.Generate(ctx, &video.GenerateRequest{
    Prompt:      "A butterfly flying among flowers",
    Duration:    4.0,
    AspectRatio: "16:9",
})
```

## Multimodal Messages

```go
msg := multimodal.MultimodalMessage{
    Role: "user",
    Contents: []multimodal.Content{
        multimodal.NewTextContent("Analyze this image"),
        multimodal.NewImageURLContent("https://example.com/image.png"),
    },
}
```

## Configuration

```go
visionConfig := multimodal.VisionConfig{
    Resolution:   multimodal.ResolutionHigh,
    MaxImageSize: 20 * 1024 * 1024,
    MaxDimension: 4096,
}

audioConfig := multimodal.AudioConfig{
    MaxDuration: 300,
    MaxFileSize: 25 * 1024 * 1024,
    SampleRate:  16000,
}
```
