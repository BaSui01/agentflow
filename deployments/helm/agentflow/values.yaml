# =============================================================================
# ğŸš€ AgentFlow Helm Chart Values
# =============================================================================
# é»˜è®¤é…ç½®å€¼ï¼Œå¯é€šè¿‡ --set æˆ– -f values.yaml è¦†ç›–
# =============================================================================

# -----------------------------------------------------------------------------
# ğŸ“¦ åŸºç¡€é…ç½®
# -----------------------------------------------------------------------------
replicaCount: 1

image:
  repository: agentflow
  pullPolicy: IfNotPresent
  # è¦†ç›– Chart appVersion ä¸­çš„é•œåƒæ ‡ç­¾
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

# -----------------------------------------------------------------------------
# ğŸ” æœåŠ¡è´¦æˆ·
# -----------------------------------------------------------------------------
serviceAccount:
  # æ˜¯å¦åˆ›å»ºæœåŠ¡è´¦æˆ·
  create: true
  # æ³¨è§£
  annotations: {}
  # æœåŠ¡è´¦æˆ·åç§°ï¼ˆç•™ç©ºåˆ™ä½¿ç”¨ fullname æ¨¡æ¿ç”Ÿæˆï¼‰
  name: ""

# -----------------------------------------------------------------------------
# ğŸ·ï¸ Pod é…ç½®
# -----------------------------------------------------------------------------
podAnnotations: {}

podLabels: {}

podSecurityContext:
  fsGroup: 1000

securityContext:
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  runAsUser: 1000

# -----------------------------------------------------------------------------
# ğŸŒ æœåŠ¡é…ç½®
# -----------------------------------------------------------------------------
service:
  type: ClusterIP

  http:
    port: 8080
    targetPort: 8080

  grpc:
    port: 9090
    targetPort: 9090

  metrics:
    port: 9091
    targetPort: 9091

# -----------------------------------------------------------------------------
# ğŸšª Ingress é…ç½®
# -----------------------------------------------------------------------------
ingress:
  enabled: false
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: agentflow.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: agentflow-tls
  #    hosts:
  #      - agentflow.local

# -----------------------------------------------------------------------------
# ğŸ’ª èµ„æºé…ç½®
# -----------------------------------------------------------------------------
resources:
  limits:
    cpu: 1000m
    memory: 1Gi
  requests:
    cpu: 100m
    memory: 256Mi

# -----------------------------------------------------------------------------
# ğŸ“ˆ è‡ªåŠ¨æ‰©ç¼©å®¹
# -----------------------------------------------------------------------------
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

# -----------------------------------------------------------------------------
# ğŸ”„ Pod ä¸­æ–­é¢„ç®—
# -----------------------------------------------------------------------------
podDisruptionBudget:
  enabled: false
  minAvailable: 1
  # maxUnavailable: 1

# -----------------------------------------------------------------------------
# ğŸ“ è°ƒåº¦é…ç½®
# -----------------------------------------------------------------------------
nodeSelector: {}

tolerations: []

affinity: {}

# æ‹“æ‰‘åˆ†å¸ƒçº¦æŸ
topologySpreadConstraints: []

# -----------------------------------------------------------------------------
# ğŸ¥ å¥åº·æ£€æŸ¥
# -----------------------------------------------------------------------------
livenessProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 10
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /ready
    port: http
  initialDelaySeconds: 5
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3

startupProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 5
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 30

# -----------------------------------------------------------------------------
# âš™ï¸ åº”ç”¨é…ç½®
# -----------------------------------------------------------------------------
config:
  # æœåŠ¡å™¨é…ç½®
  server:
    httpPort: 8080
    grpcPort: 9090
    metricsPort: 9091
    readTimeout: "30s"
    writeTimeout: "30s"
    shutdownTimeout: "15s"

  # Agent é»˜è®¤é…ç½®
  agent:
    name: "default-agent"
    model: "gpt-4"
    maxIterations: 10
    temperature: 0.7
    maxTokens: 4096
    timeout: "5m"
    streamEnabled: true
    memory:
      enabled: true
      type: "buffer"
      maxMessages: 100
      tokenLimit: 8000

  # æ—¥å¿—é…ç½®
  log:
    level: "info"
    format: "json"
    enableCaller: true

  # é¥æµ‹é…ç½®
  telemetry:
    enabled: false
    otlpEndpoint: ""
    serviceName: "agentflow"
    sampleRate: 0.1

# -----------------------------------------------------------------------------
# ğŸ”‘ å¯†é’¥é…ç½®
# -----------------------------------------------------------------------------
secrets:
  # LLM API Keyï¼ˆå»ºè®®ä½¿ç”¨å¤–éƒ¨ Secretï¼‰
  llmApiKey: ""
  # æˆ–å¼•ç”¨å·²å­˜åœ¨çš„ Secret
  existingSecret: ""
  # Secret ä¸­çš„ key åç§°
  llmApiKeyKey: "llm-api-key"

# -----------------------------------------------------------------------------
# ğŸ”´ Redis é…ç½®
# -----------------------------------------------------------------------------
redis:
  # æ˜¯å¦å¯ç”¨å†…ç½® Redis
  enabled: true

  # å¤–éƒ¨ Redis é…ç½®ï¼ˆå½“ enabled: false æ—¶ä½¿ç”¨ï¼‰
  external:
    host: ""
    port: 6379
    password: ""
    db: 0

  # Bitnami Redis Chart é…ç½®
  architecture: standalone
  auth:
    enabled: false
  master:
    persistence:
      enabled: true
      size: 1Gi

# -----------------------------------------------------------------------------
# ğŸ˜ PostgreSQL é…ç½®
# -----------------------------------------------------------------------------
postgresql:
  # æ˜¯å¦å¯ç”¨å†…ç½® PostgreSQL
  enabled: false

  # å¤–éƒ¨ PostgreSQL é…ç½®ï¼ˆå½“ enabled: false æ—¶ä½¿ç”¨ï¼‰
  external:
    host: ""
    port: 5432
    user: "agentflow"
    password: ""
    database: "agentflow"
    sslMode: "disable"

  # Bitnami PostgreSQL Chart é…ç½®
  auth:
    username: agentflow
    password: ""
    database: agentflow
  primary:
    persistence:
      enabled: true
      size: 8Gi

# -----------------------------------------------------------------------------
# ğŸ”· Qdrant é…ç½®
# -----------------------------------------------------------------------------
qdrant:
  # æ˜¯å¦å¯ç”¨ Qdrant
  enabled: false

  # å¤–éƒ¨ Qdrant é…ç½®
  external:
    host: ""
    port: 6334
    apiKey: ""
    collection: "agentflow_vectors"

# -----------------------------------------------------------------------------
# ğŸ“Š ç›‘æ§é…ç½®
# -----------------------------------------------------------------------------
metrics:
  # æ˜¯å¦å¯ç”¨ Prometheus æŒ‡æ ‡
  enabled: true

  # ServiceMonitorï¼ˆéœ€è¦ Prometheus Operatorï¼‰
  serviceMonitor:
    enabled: false
    interval: 30s
    scrapeTimeout: 10s
    labels: {}
    annotations: {}

# -----------------------------------------------------------------------------
# ğŸ“ æŒä¹…åŒ–å­˜å‚¨
# -----------------------------------------------------------------------------
persistence:
  enabled: false
  storageClass: ""
  accessModes:
    - ReadWriteOnce
  size: 1Gi
  annotations: {}

# -----------------------------------------------------------------------------
# ğŸ”§ é¢å¤–é…ç½®
# -----------------------------------------------------------------------------
# é¢å¤–çš„ç¯å¢ƒå˜é‡
extraEnv: []
  # - name: EXTRA_VAR
  #   value: "value"

# é¢å¤–çš„ç¯å¢ƒå˜é‡ï¼ˆä» ConfigMap/Secretï¼‰
extraEnvFrom: []
  # - configMapRef:
  #     name: extra-config
  # - secretRef:
  #     name: extra-secret

# é¢å¤–çš„å·
extraVolumes: []
  # - name: extra-volume
  #   configMap:
  #     name: extra-config

# é¢å¤–çš„å·æŒ‚è½½
extraVolumeMounts: []
  # - name: extra-volume
  #   mountPath: /etc/extra

# åˆå§‹åŒ–å®¹å™¨
initContainers: []

# Sidecar å®¹å™¨
sidecars: []
